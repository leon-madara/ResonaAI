# Makefile for ResonaAI Demo Data Generator

.PHONY: help install test clean build docker run validate docs

# Default target
help:
	@echo "ResonaAI Demo Data Generator - Available Commands:"
	@echo "=================================================="
	@echo "  install     - Install dependencies"
	@echo "  test        - Run test suite"
	@echo "  validate    - Validate system setup"
	@echo "  clean       - Clean build artifacts"
	@echo "  build       - Build distribution packages"
	@echo "  docker      - Build Docker image"
	@echo "  run         - Run demo with quick preset"
	@echo "  run-full    - Run demo with comprehensive preset"
	@echo "  docs        - Generate documentation"
	@echo "  help        - Show this help message"

# Install dependencies
install:
	@echo "ğŸ”§ Installing dependencies..."
	pip install -r requirements.txt
	@echo "âœ… Dependencies installed"

# Run tests
test:
	@echo "ğŸ§ª Running test suite..."
	python -m pytest tests/ -v
	@echo "âœ… Tests completed"

# Validate system
validate:
	@echo "ğŸ” Validating system setup..."
	python demo_data_generator.py validate
	@echo "âœ… Validation completed"

# Clean build artifacts
clean:
	@echo "ğŸ§¹ Cleaning build artifacts..."
	rm -rf build/
	rm -rf dist/
	rm -rf *.egg-info/
	rm -rf __pycache__/
	find . -name "*.pyc" -delete
	find . -name "*.pyo" -delete
	find . -name "__pycache__" -type d -exec rm -rf {} +
	rm -rf demo_data/
	rm -rf .pytest_cache/
	rm -rf .hypothesis/
	@echo "âœ… Cleanup completed"

# Build distribution
build: clean
	@echo "ğŸ—ï¸ Building distribution packages..."
	python scripts/build_distribution.py
	@echo "âœ… Build completed"

# Build Docker image
docker:
	@echo "ğŸ³ Building Docker image..."
	docker build -t resona-demo-data-generator:latest .
	@echo "âœ… Docker image built"

# Run demo (quick preset)
run:
	@echo "ğŸš€ Running demo (quick preset)..."
	python demo_data_generator.py launch --preset quick --auto-browser

# Run demo (comprehensive preset)
run-full:
	@echo "ğŸš€ Running demo (comprehensive preset)..."
	python demo_data_generator.py launch --preset comprehensive --auto-browser

# Generate documentation
docs:
	@echo "ğŸ“š Documentation files:"
	@echo "  - README.md: Main documentation"
	@echo "  - USAGE_GUIDE.md: Detailed usage guide"
	@echo "  - SETUP.md: Installation instructions"
	@echo "  - TROUBLESHOOTING.md: Common issues and solutions"
	@echo "âœ… Documentation is up to date"

# Development targets
dev-install: install
	@echo "ğŸ”§ Installing development dependencies..."
	pip install black flake8 mypy pytest-cov
	@echo "âœ… Development environment ready"

format:
	@echo "ğŸ¨ Formatting code..."
	black .
	@echo "âœ… Code formatted"

lint:
	@echo "ğŸ” Linting code..."
	flake8 .
	@echo "âœ… Linting completed"

type-check:
	@echo "ğŸ” Type checking..."
	mypy .
	@echo "âœ… Type checking completed"

# Quick development workflow
dev: clean dev-install format lint type-check test
	@echo "âœ… Development workflow completed"